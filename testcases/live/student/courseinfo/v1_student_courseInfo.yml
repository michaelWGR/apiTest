- config:
    name: 学生首页课程
    setup_hooks:
      - ${delete_room_schedule(studentId=6000079)}
      - ${add_room_schedule(studentId=6000079)}

- test:
    name: get token
    variables:
        account: ${yml(web_account)}
        deviceId: ${yml(student.default_device_id)}
        password: ${yml(student.account.default_password)}
    testcase: testcases/live/student/account/student_get_token.yml
    output:
        - token

- test:
    name: 请求成功
    api: api/live/student/courseinfo/v1_student_courseInfo.yml
    variables:
      Authorization: $token
      deviceId: '123456'
    validate:
      - eq: [content.code, 200]
      - eq: [content.msg, ok]
      - eq: [content.success, true]
      - type_match: [content.data.0.roomUserScheduleId, int]
      - type_match: [content.data.0.teacherId, int]
      - type_match: [content.data.0.teacherName, str]
      - type_match: [content.data.0.teacherAvatar, str]
      - type_match: [content.data.0.courseInfoId, int]
      - type_match: [content.data.0.courseName, str]
      - type_match: [content.data.0.courseType, str]
      - type_match: [content.data.0.monthDay, str]
      - type_match: [content.data.0.weekDay, str]
      - type_match: [content.data.0.beginTime, str]
      - type_match: [content.data.0.beginTimestamp, int]
      - type_match: [content.data.0.endTimestamp, int]
      - type_match: [content.data.0.channel, str]
      - eq: [content.data.0.comment, null]
      - type_match: [content.data.0.status, int]
      - type_match: [content.data.0.livePlatform, int]
      - type_match: [content.data.0.courseCoverImg, str]
      - eq: [content.data.0.courseRecord.hasPrepareClass, False]
      - eq: [content.data.0.courseRecord.hasTakeClass, False]
      - type_match: [content.data.0.courseRecord.homeworkStatus, int]
      - type_match: [content.data.0.courseAction.prepareUrl, str]
      - type_match: [content.data.0.courseAction.reviewUrl, str]
      - type_match: [content.data.0.courseAction.commentUrl, str]
      - type_match: [content.data.0.curriculumType, int]

- test:
    name: token 错误
    api: api/live/student/courseinfo/v1_student_courseInfo.yml
    variables:
      deviceId: '123456'
      Authorization: abc
    validate:
      - eq: [content.code, 703]
      - eq: [content.msg, accessToken error]

- test:
    name: token 为空
    api: api/live/student/courseinfo/v1_student_courseInfo.yml
    variables:
      deviceId: '123456'
      Authorization: null
    validate:
      - eq: [content.code, 703]
      - eq: [content.msg, accessToken error]

- test:
    name: deviceId 为空
    api: api/live/student/courseinfo/v1_student_courseInfo.yml
    variables:
      deviceId: null
      Authorization: $token
    validate:
      - eq: [content.code, 703]
      - eq: [content.msg, accessToken error]

- test:
    name: deviceId 不正确
    api: api/live/student/courseinfo/v1_student_courseInfo.yml
    variables:
      deviceId: '666666'
      Authorization: $token
    validate:
      - eq: [content.code, 703]
      - eq: [content.msg, accessToken error]

