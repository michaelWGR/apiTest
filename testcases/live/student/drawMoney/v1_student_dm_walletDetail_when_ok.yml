- config:
    name: 获取用户的画币收支详情
    id: get_draw_money_walletDetail
    variables:
      dm_dict: ${get_userId_in_dm_detail(0)}
      origin_account_dict: ${get_origin_userinfo($dm_dict)}
      account: ${get_dm_account($dm_dict)}
      max_page: ${get_dm_account_max_page($dm_dict)}
      next_page: ${get_dm_acount_next_page($max_page)}
      p_page: 1
      p_size: 6
      device_id: ${gen_random_string(29)}
      password: ${yml(student.account.default_password)}
    setup_hooks:
      - ${update_user_password($dm_dict)}
    teardown_hooks:
      - ${rollback_user_password($origin_account_dict)}

- test:
    name: 登录
    variables:
      deviceId: $device_id
    testcase: testcases/live/student/account/student_get_token.yml
    output:
      - token

- test:
    name: 登录的用户获取画币收支
    api: api/live/student/drawMoney/v1_student_dm_walletDetail.yml
    variables:
      page: $p_page
      Authorization: $token
      deviceId: $device_id
      size: $p_size
    validate:
      - eq: [content.code, 200]
      - eq: [content.msg, "ok"]
      - eq: [content.success, True]
      - type_match: [content.data.drawMoneyChangeRecords, list]









